{"ast":null,"code":"import power from'../assets/images/power.jpg';import king from'../assets/images/king.jpg';import monster from'../assets/images/monster.jpg';import'../App.css';import{useEffect,useRef,useState}from'react';import{Annotorious}from'@recogito/annotorious';import'@recogito/annotorious/dist/annotorious.min.css';import axios from\"axios\";import baseUrl from\"../baseUrl\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Home(){// Ref to the image DOM element\nconst imgE=useRef();// The current Annotorious instance\nconst[anno,setAnno]=useState();// Current drawing tool name\nconst[tool,setTool]=useState('rect');// Current Annotations\nconst[strannos,setStrannos]=useState('no annotations yet');var annotations;const[error,setError]=useState('');const[loadedAnno,setLoadAnno]=useState([]);// Init Annotorious when the component\n// mounts, and keep the current 'anno'\n// instance in the application state\nuseEffect(()=>{let processing=true;axiosFetchData(processing);let annotorious=null;if(imgE.current){// Init\nannotorious=new Annotorious({image:imgE.current});//annotations = annotorious.getAnnotations();\n//stranno = annotations;\n// Attach event handlers here\nannotorious.on('createAnnotation',annotation=>{console.log('created',annotation);//console.log('annotations', annotations);\n});annotorious.on('updateAnnotation',(annotation,previous)=>{console.log('updated',annotation,previous);});annotorious.on('deleteAnnotation',annotation=>{console.log('deleted',annotation);});}// Keep current Annotorious instance in state\nsetAnno(annotorious);// Cleanup: destroy current instance\nreturn()=>{processing=false;annotorious.destroy();};},[]);// Toggles current tool + button label\nconst toggleTool=()=>{if(tool==='rect'){setTool('polygon');anno.setDrawingTool('polygon');}else{setTool('rect');anno.setDrawingTool('rect');}};var timestamp=new Date().getTime();var image=document.getElementById(\"img\");//var imgE = imgE;\nconst image1=()=>{image.src=power;};const image2=()=>{image.src=king;image.id=\"002\";//imgE = imgE2;\n};const image3=()=>{image.src=monster;image.id=\"003\";};const showAnno=()=>{//const annotations = annotorious.getAnnotations();\n// stranno = annotations.body[0].value\nannotations=anno.getAnnotations();console.log('Existing Annotations:',annotations);var temp=\"\";if(annotations.length>0){for(let i=0;i<annotations.length;i++){temp=temp+annotations[i].body[0].value;if(i!=annotations.length-1){temp=temp+\", \";}}setStrannos(/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:temp}));}//stranno = annotations[0].body[0].value\n};const loadAnno=()=>{console.log(loadedAnno.length);for(var i=0;i<loadedAnno.length;i++){console.log(loadedAnno[i].body[0].value);anno.addAnnotation(loadedAnno[i]);}};const axiosFetchData=async processing=>{await axios.get('${baseUrl}/load-anno').then(res=>{if(processing){setLoadAnno(res.data);}}).catch(err=>console.log(err));};const saveAnno=e=>{e.preventDefault();axiosPostData();};const axiosPostData=async()=>{const postData=anno.getAnnotations();await axios.post('${baseUrl}/save-anno',postData).then(res=>setError(/*#__PURE__*/_jsx(\"p\",{className:\"success\",children:res.data})));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleTool,children:tool==='rect'?'RECTANGLE':'POLYGON'}),/*#__PURE__*/_jsx(\"button\",{onClick:showAnno,children:\"Show Annotations\"}),/*#__PURE__*/_jsx(\"button\",{onClick:image1,children:\"image1\"}),/*#__PURE__*/_jsx(\"button\",{onClick:image2,children:\"image2\"}),/*#__PURE__*/_jsx(\"button\",{onClick:image3,children:\"image3\"}),/*#__PURE__*/_jsx(\"button\",{onClick:saveAnno,children:\"Save Annotations\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadAnno,children:\"Load Annotations\"}),strannos,error]}),/*#__PURE__*/_jsx(\"img\",{id:\"001\",ref:imgE,src:power,alt:\"power\"})]});}export default Home;","map":{"version":3,"names":["power","king","monster","useEffect","useRef","useState","Annotorious","axios","baseUrl","jsx","_jsx","jsxs","_jsxs","Home","imgE","anno","setAnno","tool","setTool","strannos","setStrannos","annotations","error","setError","loadedAnno","setLoadAnno","processing","axiosFetchData","annotorious","current","image","on","annotation","console","log","previous","destroy","toggleTool","setDrawingTool","timestamp","Date","getTime","document","getElementById","image1","src","image2","id","image3","showAnno","getAnnotations","temp","length","i","body","value","className","children","loadAnno","addAnnotation","get","then","res","data","catch","err","saveAnno","e","preventDefault","axiosPostData","postData","post","onClick","ref","alt"],"sources":["C:/Users/parij/reactfirst/frontend/src/pages/Home.js"],"sourcesContent":["import power from '../assets/images/power.jpg';\r\nimport king from '../assets/images/king.jpg';\r\nimport monster from '../assets/images/monster.jpg';\r\nimport '../App.css';\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { Annotorious } from '@recogito/annotorious';\r\nimport '@recogito/annotorious/dist/annotorious.min.css';\r\nimport axios from \"axios\"\r\nimport baseUrl from \"../baseUrl\";\r\n\r\nfunction Home() {\r\n\r\n    // Ref to the image DOM element\r\n    const imgE = useRef();\r\n  \r\n    // The current Annotorious instance\r\n    const [ anno, setAnno ] = useState();\r\n  \r\n    // Current drawing tool name\r\n    const [ tool, setTool ] = useState('rect');\r\n  \r\n    // Current Annotations\r\n    const [ strannos, setStrannos ] = useState('no annotations yet');\r\n    var annotations;\r\n    \r\n    const [error, setError] = useState('');\r\n\r\n    const [loadedAnno, setLoadAnno] = useState([]);\r\n  \r\n    // Init Annotorious when the component\r\n    // mounts, and keep the current 'anno'\r\n    // instance in the application state\r\n    useEffect(() => {\r\n\r\n      let processing = true\r\n      axiosFetchData(processing)\r\n\r\n      let annotorious = null;\r\n  \r\n      if (imgE.current) {\r\n        // Init\r\n        annotorious = new Annotorious({\r\n          image: imgE.current,\r\n        });\r\n        \r\n        //annotations = annotorious.getAnnotations();\r\n        //stranno = annotations;\r\n        \r\n        // Attach event handlers here\r\n        annotorious.on('createAnnotation', annotation => {\r\n          console.log('created', annotation);\r\n          //console.log('annotations', annotations);\r\n        });\r\n        \r\n        annotorious.on('updateAnnotation', (annotation, previous) => {\r\n          console.log('updated', annotation, previous);\r\n        });\r\n  \r\n        annotorious.on('deleteAnnotation', annotation => {\r\n          console.log('deleted', annotation);\r\n        });\r\n  \r\n  \r\n      }\r\n\r\n      // Keep current Annotorious instance in state\r\n      setAnno(annotorious);\r\n      \r\n      // Cleanup: destroy current instance\r\n      return () => {\r\n          processing = false;\r\n          annotorious.destroy();\r\n      }\r\n    }, []);\r\n  \r\n    \r\n    // Toggles current tool + button label\r\n    const toggleTool = () => {\r\n      if (tool === 'rect') {\r\n        setTool('polygon');\r\n        anno.setDrawingTool('polygon');\r\n      } else {\r\n        setTool('rect');\r\n        anno.setDrawingTool('rect');\r\n      }\r\n    }\r\n    \r\n    var timestamp = new Date().getTime();\r\n    var image =document.getElementById(\"img\");\r\n    //var imgE = imgE;\r\n    \r\n    const image1 = () => {\r\n      image.src = power\r\n    }\r\n    const image2 = () => {\r\n      image.src = king\r\n      image.id = \"002\"\r\n      //imgE = imgE2;\r\n    }\r\n    const image3 = () => {\r\n      image.src = monster \r\n      image.id = \"003\"\r\n    }\r\n\r\n    const showAnno = () => {\r\n      //const annotations = annotorious.getAnnotations();\r\n      // stranno = annotations.body[0].value\r\n      annotations = anno.getAnnotations();\r\n      console.log('Existing Annotations:', annotations);\r\n      var temp = \"\";\r\n      if(annotations.length > 0){\r\n        for(let i = 0; i < annotations.length; i++){\r\n          temp = temp + annotations[i].body[0].value\r\n          if(i != annotations.length-1){\r\n              temp = temp + \", \"\r\n          }\r\n        }\r\n          setStrannos(<p className=\"success\">{temp}</p>);\r\n      }\r\n      //stranno = annotations[0].body[0].value\r\n    }\r\n\r\n    const loadAnno = () => {\r\n      console.log(loadedAnno.length);\r\n      for(var i = 0; i < loadedAnno.length; i++){\r\n          console.log(loadedAnno[i].body[0].value);\r\n          anno.addAnnotation(loadedAnno[i]);\r\n      }\r\n    }\r\n\r\n    const axiosFetchData = async(processing) => {\r\n      await axios.get('${baseUrl}/load-anno')\r\n      .then(res => {\r\n          if (processing) {\r\n              setLoadAnno(res.data)\r\n          }\r\n      })\r\n      .catch(err => console.log(err))\r\n    }\r\n\r\n    const saveAnno = (e) => {\r\n      e.preventDefault();\r\n\r\n      axiosPostData();\r\n    }\r\n  \r\n    \r\n    const axiosPostData = async() => {\r\n      const postData = anno.getAnnotations();\r\n      await axios.post('${baseUrl}/save-anno', postData)\r\n      .then(res => setError(<p className=\"success\">{res.data}</p>))\r\n    }\r\n\r\n    return (\r\n      <div>\r\n        <div>\r\n          <button\r\n            onClick={toggleTool}>\r\n              { tool === 'rect' ? 'RECTANGLE' : 'POLYGON' }\r\n          </button>\r\n          <button\r\n            onClick={showAnno}>\r\n              Show Annotations\r\n          </button>\r\n          <button onClick={image1}>image1</button>\r\n          <button onClick={image2}>image2</button>\r\n          <button onClick={image3}>image3</button>\r\n          <button onClick={saveAnno}>Save Annotations</button> \r\n          <button onClick={loadAnno}>Load Annotations</button> \r\n\r\n        {strannos}\r\n        {error}\r\n        </div>\r\n\r\n\r\n        <img \r\n          id=\"001\"\r\n          ref={imgE} \r\n          src={power} \r\n          alt=\"power\" />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  export default Home;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,4BAA4B,CAC9C,MAAO,CAAAC,IAAI,KAAM,2BAA2B,CAC5C,MAAO,CAAAC,OAAO,KAAM,8BAA8B,CAClD,MAAO,YAAY,CACnB,OAASC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CACnD,OAASC,WAAW,KAAQ,uBAAuB,CACnD,MAAO,gDAAgD,CACvD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,OAAO,KAAM,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEjC,QAAS,CAAAC,IAAIA,CAAA,CAAG,CAEZ;AACA,KAAM,CAAAC,IAAI,CAAGV,MAAM,CAAC,CAAC,CAErB;AACA,KAAM,CAAEW,IAAI,CAAEC,OAAO,CAAE,CAAGX,QAAQ,CAAC,CAAC,CAEpC;AACA,KAAM,CAAEY,IAAI,CAAEC,OAAO,CAAE,CAAGb,QAAQ,CAAC,MAAM,CAAC,CAE1C;AACA,KAAM,CAAEc,QAAQ,CAAEC,WAAW,CAAE,CAAGf,QAAQ,CAAC,oBAAoB,CAAC,CAChE,GAAI,CAAAgB,WAAW,CAEf,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGlB,QAAQ,CAAC,EAAE,CAAC,CAEtC,KAAM,CAACmB,UAAU,CAAEC,WAAW,CAAC,CAAGpB,QAAQ,CAAC,EAAE,CAAC,CAE9C;AACA;AACA;AACAF,SAAS,CAAC,IAAM,CAEd,GAAI,CAAAuB,UAAU,CAAG,IAAI,CACrBC,cAAc,CAACD,UAAU,CAAC,CAE1B,GAAI,CAAAE,WAAW,CAAG,IAAI,CAEtB,GAAId,IAAI,CAACe,OAAO,CAAE,CAChB;AACAD,WAAW,CAAG,GAAI,CAAAtB,WAAW,CAAC,CAC5BwB,KAAK,CAAEhB,IAAI,CAACe,OACd,CAAC,CAAC,CAEF;AACA;AAEA;AACAD,WAAW,CAACG,EAAE,CAAC,kBAAkB,CAAEC,UAAU,EAAI,CAC/CC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEF,UAAU,CAAC,CAClC;AACF,CAAC,CAAC,CAEFJ,WAAW,CAACG,EAAE,CAAC,kBAAkB,CAAE,CAACC,UAAU,CAAEG,QAAQ,GAAK,CAC3DF,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEF,UAAU,CAAEG,QAAQ,CAAC,CAC9C,CAAC,CAAC,CAEFP,WAAW,CAACG,EAAE,CAAC,kBAAkB,CAAEC,UAAU,EAAI,CAC/CC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEF,UAAU,CAAC,CACpC,CAAC,CAAC,CAGJ,CAEA;AACAhB,OAAO,CAACY,WAAW,CAAC,CAEpB;AACA,MAAO,IAAM,CACTF,UAAU,CAAG,KAAK,CAClBE,WAAW,CAACQ,OAAO,CAAC,CAAC,CACzB,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAGN;AACA,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,GAAIpB,IAAI,GAAK,MAAM,CAAE,CACnBC,OAAO,CAAC,SAAS,CAAC,CAClBH,IAAI,CAACuB,cAAc,CAAC,SAAS,CAAC,CAChC,CAAC,IAAM,CACLpB,OAAO,CAAC,MAAM,CAAC,CACfH,IAAI,CAACuB,cAAc,CAAC,MAAM,CAAC,CAC7B,CACF,CAAC,CAED,GAAI,CAAAC,SAAS,CAAG,GAAI,CAAAC,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC,CACpC,GAAI,CAAAX,KAAK,CAAEY,QAAQ,CAACC,cAAc,CAAC,KAAK,CAAC,CACzC;AAEA,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnBd,KAAK,CAACe,GAAG,CAAG7C,KAAK,CACnB,CAAC,CACD,KAAM,CAAA8C,MAAM,CAAGA,CAAA,GAAM,CACnBhB,KAAK,CAACe,GAAG,CAAG5C,IAAI,CAChB6B,KAAK,CAACiB,EAAE,CAAG,KAAK,CAChB;AACF,CAAC,CACD,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACnBlB,KAAK,CAACe,GAAG,CAAG3C,OAAO,CACnB4B,KAAK,CAACiB,EAAE,CAAG,KAAK,CAClB,CAAC,CAED,KAAM,CAAAE,QAAQ,CAAGA,CAAA,GAAM,CACrB;AACA;AACA5B,WAAW,CAAGN,IAAI,CAACmC,cAAc,CAAC,CAAC,CACnCjB,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEb,WAAW,CAAC,CACjD,GAAI,CAAA8B,IAAI,CAAG,EAAE,CACb,GAAG9B,WAAW,CAAC+B,MAAM,CAAG,CAAC,CAAC,CACxB,IAAI,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAGhC,WAAW,CAAC+B,MAAM,CAAEC,CAAC,EAAE,CAAC,CACzCF,IAAI,CAAGA,IAAI,CAAG9B,WAAW,CAACgC,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,KAAK,CAC1C,GAAGF,CAAC,EAAIhC,WAAW,CAAC+B,MAAM,CAAC,CAAC,CAAC,CACzBD,IAAI,CAAGA,IAAI,CAAG,IAAI,CACtB,CACF,CACE/B,WAAW,cAACV,IAAA,MAAG8C,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEN,IAAI,CAAI,CAAC,CAAC,CAClD,CACA;AACF,CAAC,CAED,KAAM,CAAAO,QAAQ,CAAGA,CAAA,GAAM,CACrBzB,OAAO,CAACC,GAAG,CAACV,UAAU,CAAC4B,MAAM,CAAC,CAC9B,IAAI,GAAI,CAAAC,CAAC,CAAG,CAAC,CAAEA,CAAC,CAAG7B,UAAU,CAAC4B,MAAM,CAAEC,CAAC,EAAE,CAAC,CACtCpB,OAAO,CAACC,GAAG,CAACV,UAAU,CAAC6B,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACC,KAAK,CAAC,CACxCxC,IAAI,CAAC4C,aAAa,CAACnC,UAAU,CAAC6B,CAAC,CAAC,CAAC,CACrC,CACF,CAAC,CAED,KAAM,CAAA1B,cAAc,CAAG,KAAM,CAAAD,UAAU,EAAK,CAC1C,KAAM,CAAAnB,KAAK,CAACqD,GAAG,CAAC,sBAAsB,CAAC,CACtCC,IAAI,CAACC,GAAG,EAAI,CACT,GAAIpC,UAAU,CAAE,CACZD,WAAW,CAACqC,GAAG,CAACC,IAAI,CAAC,CACzB,CACJ,CAAC,CAAC,CACDC,KAAK,CAACC,GAAG,EAAIhC,OAAO,CAACC,GAAG,CAAC+B,GAAG,CAAC,CAAC,CACjC,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAIC,CAAC,EAAK,CACtBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElBC,aAAa,CAAC,CAAC,CACjB,CAAC,CAGD,KAAM,CAAAA,aAAa,CAAG,KAAAA,CAAA,GAAW,CAC/B,KAAM,CAAAC,QAAQ,CAAGvD,IAAI,CAACmC,cAAc,CAAC,CAAC,CACtC,KAAM,CAAA3C,KAAK,CAACgE,IAAI,CAAC,sBAAsB,CAAED,QAAQ,CAAC,CACjDT,IAAI,CAACC,GAAG,EAAIvC,QAAQ,cAACb,IAAA,MAAG8C,SAAS,CAAC,SAAS,CAAAC,QAAA,CAAEK,GAAG,CAACC,IAAI,CAAI,CAAC,CAAC,CAAC,CAC/D,CAAC,CAED,mBACEnD,KAAA,QAAA6C,QAAA,eACE7C,KAAA,QAAA6C,QAAA,eACE/C,IAAA,WACE8D,OAAO,CAAEnC,UAAW,CAAAoB,QAAA,CAChBxC,IAAI,GAAK,MAAM,CAAG,WAAW,CAAG,SAAS,CACvC,CAAC,cACTP,IAAA,WACE8D,OAAO,CAAEvB,QAAS,CAAAQ,QAAA,CAAC,kBAErB,CAAQ,CAAC,cACT/C,IAAA,WAAQ8D,OAAO,CAAE5B,MAAO,CAAAa,QAAA,CAAC,QAAM,CAAQ,CAAC,cACxC/C,IAAA,WAAQ8D,OAAO,CAAE1B,MAAO,CAAAW,QAAA,CAAC,QAAM,CAAQ,CAAC,cACxC/C,IAAA,WAAQ8D,OAAO,CAAExB,MAAO,CAAAS,QAAA,CAAC,QAAM,CAAQ,CAAC,cACxC/C,IAAA,WAAQ8D,OAAO,CAAEN,QAAS,CAAAT,QAAA,CAAC,kBAAgB,CAAQ,CAAC,cACpD/C,IAAA,WAAQ8D,OAAO,CAAEd,QAAS,CAAAD,QAAA,CAAC,kBAAgB,CAAQ,CAAC,CAErDtC,QAAQ,CACRG,KAAK,EACD,CAAC,cAGNZ,IAAA,QACEqC,EAAE,CAAC,KAAK,CACR0B,GAAG,CAAE3D,IAAK,CACV+B,GAAG,CAAE7C,KAAM,CACX0E,GAAG,CAAC,OAAO,CAAE,CAAC,EACb,CAAC,CAEV,CAEA,cAAe,CAAA7D,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}